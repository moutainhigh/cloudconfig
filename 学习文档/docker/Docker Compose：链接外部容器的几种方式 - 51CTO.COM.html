<!DOCTYPE html>
<!-- saved from url=(0044)http://cloud.51cto.com/art/201707/544957.htm -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK"><script async="" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_ajax.php"></script><script async="" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_ajax(1).php"></script><script async="" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_ajax(2).php"></script><script async="" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/index.php"></script><script async="" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/getRecommendJob.php"></script><script async="" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/index(1).php"></script>
    
    <title>Docker Compose：链接外部容器的几种方式 - 51CTO.COM</title>
    <meta name="description" content="容器之间的链接是一种很常见的操作：它提供了访问其中的某个容器的网络服务而不需要将所需的端口暴露给Docker Host主机的功能。Docker Compose中对该特性的支持同样是很方便的。然而，如果需要链接的容器没有定义在同一个 docker-compose.yml 中的时候，这个时候就稍微麻烦复杂了点。">
    <meta name="keywords" content="Docker Compose,链接,容器">
    <!--<base target="_blank">--><base href="." target="_blank">
    <link rel="stylesheet" type="text/css" href="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_head.css">
    <link rel="stylesheet" type="text/css" href="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_layout.css">
    <link rel="stylesheet" type="text/css" href="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_right.css">
    <script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/hm.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/jquery.min.js"></script>
<script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/share.js"></script></head>
<body>
<!-- 导航 开始-->
<!-- top start -->
<style>
    .home-top .subweb .sub_widthAuto{width:auto;}
    .top-nav .nav li .topnavA_zxf{width:194px;left:-60px;}
    .top-nav .topnavA_zxf a{padding: 0 10px;}
    .top-nav .nav li:hover .topnavA_zxf a{width:auto;text-indent:inherit;}
    .zxf_menubot{background:#F4F4F4;padding:15px 20px 0;border-top:4px solid #be0000;font-size:14px;}
    .zxf_menubot a{padding:0;}
    .zxf_menubot dl{margin-right:48px;_margin-right:40px;*margin-right:40px;}
    .zxf_menubot .nmr{margin-right:0;}
    .zxf_menubot dt,.zxf_menubot dd{float:left;}
    .zxf_menulist li{float:left;text-align:left;margin-right:20px;}
    .zxf_menulist a{display:block;margin-bottom:10px;}
    .zxf_menulist li.nmr{margin-right:0;}
    .zxf_menu_ico{width:28px;margin-right:20px;text-align:center;color:#666;}
    .zxf_menu_ico img{display:block;margin:10px auto 10px;}
    .redNav{color:#be0000;}
    .subweb-list .navcodebox{ width:410px; left:-225px; padding:20px 15px;}
    .subweb-list .navcodebox span{ width:136px;display:inline-block; float:left; text-align:center; color:#747474; font-size:13px; }
    .subweb-list .navcodebox span p{ padding-top: 10px;color:#333;}

    .rmzw_xx li a {
        float: left;
        font-size: 16px;
        height: 23px;
        line-height: 23px;
        overflow: hidden;
        width: 95%;
    }
    .rmzw_xx li span.ico {
        background: rgba(0, 0, 0, 0) url("https://s2.51cto.com/wyfs02/M02/98/D8/wKiom1lBBebwbP2OAAAAuOBywqs269.png") no-repeat scroll left center;
        float: left;
        height: 22px;
        line-height: 22px;
        width: 15px;
    }

    .rmzw_xx li {
        border-bottom: 1px dotted #ccc;
        float: left;
        margin-top: 6px;
        padding: 5px 0;
        width: 100%;
    }

    .ctoll1 dd a {
        color: #343434;
        float: left;
        font-family: "Microsoft YaHei";
        font-size: 14px;
        padding: 15px 19px 0;
    }
</style>
<div class="home-top" id="topx">
    <div class="w1001 cent">
        <div class="pdr10 fl"><a href="http://www.51cto.com/">51CTO首页</a></div>
        <div class="pdr10 fl">|</div>
        <div class="pdr10 fl">
            <div class="subweb"><span class="trans">技术频道</span><i></i>
                <div class="subweb-list" style="width: 90px; top: 37px;">
                    <a href="http://ai.51cto.com/" target="_blank">人工智能</a>
                    <a href="http://cloud.51cto.com/" target="_blank">云计算</a>
                    <a href="http://bigdata.51cto.com/" target="_blank">大数据</a>
                    <a href="http://network.51cto.com/" target="_blank">网络</a>
                    <a href="http://developer.51cto.com/" target="_blank">开发</a>
                    <a href="http://netsecurity.51cto.com/" target="_blank">安全</a>
                    <a href="http://os.51cto.com/" target="_blank">系统</a>
                    <a href="http://mobile.51cto.com/" target="_blank">移动</a>
                    <a href="http://server.51cto.com/" target="_blank">服务器</a>
                </div>
            </div>
        </div>
        <div class="pdr10 fl">|</div>
        <div class="pdr10 fl">
            <div class="subweb"><span class="trans">51CTO旗下网站</span><i></i>
                <!--旗下网站-->
                <div class="subweb-list" style="top: 37px;">
                    <a href="http://www.51cto.com/" target="_blank">51CTO.COM</a>
                    <a href="http://www.cioage.com/" target="_blank">CIOAge.COM</a>
                    <a href="http://www.watchstor.com/" target="_blank">WatchStor.COM</a>
                    <a href="http://www.hc3i.cn/" target="_blank">HC3i.CN</a>
                </div>
                <!--旗下网站-->
            </div>
        </div>
        <div class="pdr10 fl">|</div>
        <div class="pdr10 fl"><a href="http://www.51cto.com/about/map.htm" target="_blank">地图</a></div>
        <div class="pdr10 fl">|</div>
        <div class="pdr10 fl">
            <div class="subweb"><span class="trans">移动端</span><i></i>
                <!--旗下网站-->
                <div class="subweb-list sub_widthAuto" style="top: 37px;">
                    <div class="navcodebox clearfix" style="width: 546px; display: block;top: 0; border-top: 0; left:-1px;">
                        <span>
                             <img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKiom1kvkpKBgQFIAACDBen2-dg668.jpg" width="105" height="107">
                             <p>51CTO技术栈</p>
                        </span>
                        <span>
                              <img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKioL1i40HrAObC6AAAcvPVCCV0975.jpg" width="105" height="107">
                              <p>51CTO微站服务号</p>
                        </span>
                        <span>
                              <img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKioL1i40HrQZy_TAAAcDOkrRAE327.jpg" width="107" height="107">
                              <p>51CTO学院客户端</p>
                        </span>
                        <span>
                              <img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/48594addc4b5eebf52a15bd51262ab23.jpg" width="107" height="107">
                              <p>CIO进化论</p>
                        </span>
                    </div>
                </div>
                <!--旗下网站-->
            </div>
        </div>
        <div class="top-r">
            <div id="login_status" style="text-align:right;" class="login"><i></i><a href="http://home.51cto.com/index?reback=http://cloud.51cto.com/art/201707/544957.htm" target="_self">登录</a> <a href="http://home.51cto.com/user/register?reback=http://cloud.51cto.com/art/201707/544957.htm" target="_self">注册</a><a href="http://home.51cto.com/members/in-fo?www" target="_blank"><span class="jsVipDrop" style="position: relative;"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/vip_grey.png" style="float:right; width:15px; height:14px; border:none; margin-top:10px"><div id="vip_mes_top" style="display:none;position: absolute;right:-75px;top: 22px;width: 137px;z-index: 99;"><div style="background: #faf7e6 none repeat scroll 0 0;border: 1px solid #ecb7a5;color: #666;font-size: 12px;padding: 3px 5px;position: relative;"><span style="background: rgba(0, 0, 0, 0) url(https://static1.51cto.com/home/web/images/hidearro.png) no-repeat scroll center center;display: inline-block;height: 7px;position: absolute;right: 57px;top: -6px;width: 12px;"></span><div style="color:#f60; text-align:center;">一个会员，全站特权</div></div></div></span></a><span class="fl">|</span><a onclick="addFavorite(this.href, &#39;51CTO! 官方站&#39;);return false;" href="http://www.51cto.com/">收藏本站</a></div>
        </div>
    </div>
</div>
<!-- top end -->
<!-- 导航 结束-->

<!-- 频道导航 -->
<div class="top_bg">
	<div class="wrap">
		<div id="tonglanad" class="left"><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad.php"></script></div>
		<div id="list4" class="right" style="position:relative;">
			<ul>
				<li id="wordlinkad1"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink1.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs.php"></script></li>
				<li id="wordlinkad2"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink2.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(1).php"></script></li>
				<li id="wordlinkad3"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink3.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(2).php"></script></li>
				<li id="wordlinkad4"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink4.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(3).php"></script></li>
			<div style="right: 0px; width: 24px; height: 14px; z-index: 12; position: absolute; background: transparent url(http://s5.51cto.com/wyfs02/M00/86/BB/wKiom1fI4nWStYqXAAAEoZQn6vs942.png) repeat scroll 0% 0%; bottom: 2px;"></div></ul>
			<div style="right: 0px; width: 24px; height: 14px; z-index: 12; position: absolute; background: transparent url(&#39;http://s5.51cto.com/wyfs02/M00/86/BB/wKiom1fI4nWStYqXAAAEoZQn6vs942.png&#39;) repeat scroll 0% 0%; bottom: 2px;"><div style="right: 0px; width: 24px; height: 14px; z-index: 12; position: absolute; background: transparent url(http://s5.51cto.com/wyfs02/M00/86/BB/wKiom1fI4nWStYqXAAAEoZQn6vs942.png) repeat scroll 0% 0%; bottom: 2px;"></div></div>
		</div>
	</div>
	<div class="nav">
		<a href="http://www.51cto.com/" class="logo"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/nr_logo.png" alt=""></a>
		<ul>
			<li><a href="http://cloud.51cto.com/" class="active">云计算频道</a></li>
			<li><a href="http://cloud.51cto.com/">首页</a></li>
			<li><a href="http://cloud.51cto.com/col/384/">资讯</a></li>
			<li><a href="http://cloud.51cto.com/col/385/">趋势</a></li>
			<li><a href="http://cloud.51cto.com/col/386/">应用</a></li>
			<li><a href="http://cloud.51cto.com/col/387/">安全</a></li>
			<li><a href="http://cloud.51cto.com/col/389/">开发</a></li>
			<li><a href="http://cloud.51cto.com/col/397/">百家谈</a></li>
		</ul>
		<div class="nav-rsear">
			<form method="get" action="http://www.51cto.com/php/search.php" name="searchform" target="_blank">
				<input name="keywords" id="q" type="text" placeholder="输入您要搜索的内容" class="sear-1">
				<input name="" type="submit" value="" class="sear-2">
			</form>
		</div>
	</div>
</div>
<div style="width:1002px; margin:0 auto;">
	<script type="text/javascript"><!--//<![CDATA[
    var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg.51cto.com/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
    document.write ("?zoneid=1028");
    document.write ('&amp;cb=' + m3_r);
    if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
    document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
    document.write ("&amp;loc=" + escape(window.location));
    if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
    if (document.context) document.write ("&context=" + escape(document.context));
    if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
    document.write ("'><\/scr"+"ipt>");
    //]]>--></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(4).php"></script><noscript>&lt;a href='//gg3.51cto.com/www/delivery/ck.php?n=a568f55b&amp;amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'&gt;&lt;img src='//gg2.51cto.com/www/delivery/avw.php?zoneid=1028&amp;amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;amp;n=a568f55b' border='0' alt='' /&gt;&lt;/a&gt;</noscript>
</div>

<!-- 频道导航结束 -->

<div class="main">
    <!-- 左侧内容 -->
    <div class="main_left">
        <div class="wznr">
            <h2>Docker Compose：链接外部容器的几种方式</h2>
            <p>容器之间的链接是一种很常见的操作：它提供了访问其中的某个容器的网络服务而不需要将所需的端口暴露给Docker Host主机的功能。Docker Compose中对该特性的支持同样是很方便的。然而，如果需要链接的容器没有定义在同一个 docker-compose.yml 中的时候，这个时候就稍微麻烦复杂了点。</p>
            <dl>
                <dt><span>作者：佚名</span><span>来源：<a href="http://www.tuicool.com/articles/JfUb63b" target="_blank">推酷</a></span>|<em>2017-07-17 16:27</em></dt>
                <dd>
                	<div class="left" style="padding-right: 10px">
                		<a href="javascript:favorBox(&#39;open&#39;);" title="一键收藏，随时查看，分享好友！" target="_self" class="bds_more1">&nbsp;收藏</a>
                	</div>
					<div class="bdsharebuttonbox left" data-tag="share_2">
						<a href="javascript:;" class="bds_more" data-cmd="more">&nbsp;&nbsp;分享</a>
					</div>
                </dd>
            </dl>
        </div>
        <div class="zwnr">
            <!--<h2><a href="http://down.51cto.com/data/2447132" target="_blank" style="text-decoration:none;">人工智能+区块链的发展趋势及应用调研报告</a></h2>--><br>
            <p style="text-align: center;"><a href="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKiom1lsdkSQ5eZ7AAEmkilnbAc868.jpg-wh_651x-s_3859063289.jpg" target="_blank"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKiom1lsdkSQ5eZ7AAEmkilnbAc868.jpg-wh_651x-s_3859063289.jpg" border="0" alt="" title=""></a></p>
<p>在Docker中，容器之间的链接是一种很常见的操作：它提供了访问其中的某个容器的网络服务而不需要将所需的端口暴露给Docker  Host主机的功能。Docker Compose中对该特性的支持同样是很方便的。然而，如果需要链接的容器没有定义在同一个 docker-compose.yml  中的时候，这个时候就稍微麻烦复杂了点。</p>
<p>在不使用Docker Compose的时候，将两个容器链接起来使用 ―link 参数，相对来说比较简单，以 nginx 镜像为例子：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>docker&nbsp;run&nbsp;</span><span class="comment">--rm&nbsp;--name&nbsp;test1&nbsp;-d&nbsp;nginx&nbsp;&nbsp;#开启一个实例test1</span><span>&nbsp;</span></span></li><li><span>docker&nbsp;run&nbsp;<span class="comment">--rm&nbsp;--name&nbsp;test2&nbsp;--link&nbsp;test1&nbsp;-d&nbsp;nginx&nbsp;#开启一个实例test2并与test1建立链接</span><span>&nbsp;</span></span></li></ol></pre>
<p>这样， test2 与 test1 便建立了链接，就可以在 test2 中使用访问 test1 中的服务了。</p>
<p>如果使用Docker Compose，那么这个事情就更简单了，还是以上面的 nginx 镜像为例子，编辑 docker-compose.yml  文件为：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>version:&nbsp;</span><span class="string">"3"</span><span>&nbsp;</span></span></li><li><span>services:&nbsp;</span></li><li class="alt"><span>&nbsp;test2:&nbsp;</span></li><li><span>&nbsp;image:&nbsp;nginx&nbsp;</span></li><li class="alt"><span>&nbsp;depends_on:&nbsp;</span></li><li><span>&nbsp;-&nbsp;test1&nbsp;</span></li><li class="alt"><span>&nbsp;links:&nbsp;</span></li><li><span>&nbsp;-&nbsp;test1&nbsp;</span></li><li class="alt"><span>&nbsp;test1:&nbsp;</span></li><li><span>&nbsp;image:&nbsp;nginx&nbsp;</span></li></ol></pre>
<p>最终效果与使用普通的Docker命令 docker run xxxx 建立的链接并无区别。这只是一种最为理想的情况。</p>
<ol>
    <li>如果容器没有定义在同一个 docker-compose.yml 文件中，应该如何链接它们呢?</li>
    <li>又如果定义在 docker-compose.yml 文件中的容器需要与 docker run xxx 启动的容器链接，需要如何处理?</li>
</ol>
<p>针对这两种典型的情况，下面给出我个人测试可行的办法：</p>
<ol>
    <li>方式一：让需要链接的容器同属一个外部网络</li>
</ol>
<p>我们还是使用nginx镜像来模拟这样的一个情景：假设我们需要将两个使用Docker Compose管理的nignx容器( test1 和 test2  )链接起来，使得 test2 能够访问 test1 中提供的服务，这里我们以能ping通为准。</p>
<p>首先，我们定义容器 test1 的 docker-compose.yml 文件内容为：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>version:&nbsp;</span><span class="string">"3"</span><span>&nbsp;</span></span></li><li><span>services:&nbsp;</span></li><li class="alt"><span>&nbsp;test2:&nbsp;</span></li><li><span>&nbsp;image:&nbsp;nginx&nbsp;</span></li><li class="alt"><span>&nbsp;container_name:&nbsp;test1&nbsp;</span></li><li><span>&nbsp;networks:&nbsp;</span></li><li class="alt"><span>&nbsp;-&nbsp;<span class="keyword">default</span><span>&nbsp;</span></span></li><li><span>&nbsp;-&nbsp;app_net&nbsp;</span></li><li class="alt"><span>networks:&nbsp;</span></li><li><span>&nbsp;app_net:&nbsp;</span></li><li class="alt"><span>&nbsp;external:&nbsp;<span class="keyword">true</span><span>&nbsp;</span></span></li></ol></pre>
<p>容器 test2 内容与 test1 基本一样，只是多了一个 external_links ,需要特别说明的是：  最近发布的Docker版本已经不需要使用external_links来链接容器，容器的DNS服务可以正确的作出判断  ，因此如果你你需要兼容较老版本的Docker的话，那么容器 test2 的 docker-compose.yml文件内容为：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>version:&nbsp;</span><span class="string">"3"</span><span>&nbsp;</span></span></li><li><span>services:&nbsp;</span></li><li class="alt"><span>&nbsp;test2:&nbsp;</span></li><li><span>&nbsp;image:&nbsp;nginx&nbsp;</span></li><li class="alt"><span>&nbsp;networks:&nbsp;</span></li><li><span>&nbsp;-&nbsp;<span class="keyword">default</span><span>&nbsp;</span></span></li><li class="alt"><span>&nbsp;-&nbsp;app_net&nbsp;</span></li><li><span>&nbsp;external_links:&nbsp;</span></li><li class="alt"><span>&nbsp;-&nbsp;test1&nbsp;</span></li><li><span>&nbsp;container_name:&nbsp;test2&nbsp;</span></li><li class="alt"><span>networks:&nbsp;</span></li><li><span>&nbsp;app_net:&nbsp;</span></li><li class="alt"><span>&nbsp;external:&nbsp;<span class="keyword">true</span><span>&nbsp;</span></span></li></ol></pre>
<p>否则的话， test2 的 docker-compose.yml 和 test1 的定义完全一致，不需要额外多指定一个 external_links  。相关的问题请参见stackoverflow上的相关问题： docker-compose + external container</p>
<p>正如你看到的那样，这里两个容器的定义里都使用了同一个外部网络 app_net ,因此，我们需要在启动这两个容器之前通过以下命令再创建外部网络：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>docker&nbsp;network&nbsp;</span><span class="keyword">create</span><span>&nbsp;app_net&nbsp;</span></span></li></ol></pre>
<p>之后，通过 docker-compose up -d 命令启动这两个容器，然后执行 docker exec -it test2 ping test1  ,你将会看到如下的输出：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>docker&nbsp;</span><span class="keyword">exec</span><span>&nbsp;-it&nbsp;test2&nbsp;ping&nbsp;test1&nbsp;</span></span></li><li><span>PING&nbsp;test1&nbsp;(172.18.0.2):&nbsp;56&nbsp;data&nbsp;bytes&nbsp;</span></li><li class="alt"><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.18.0.2:&nbsp;icmp_seq=0&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.091&nbsp;ms&nbsp;</span></span></li><li><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.18.0.2:&nbsp;icmp_seq=1&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.146&nbsp;ms&nbsp;</span></span></li><li class="alt"><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.18.0.2:&nbsp;icmp_seq=2&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.150&nbsp;ms&nbsp;</span></span></li><li><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.18.0.2:&nbsp;icmp_seq=3&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.145&nbsp;ms&nbsp;</span></span></li><li class="alt"><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.18.0.2:&nbsp;icmp_seq=4&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.126&nbsp;ms&nbsp;</span></span></li><li><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.18.0.2:&nbsp;icmp_seq=5&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.147&nbsp;ms&nbsp;</span></span></li></ol></pre>
<p>证明这两个容器是成功链接了，反过来在 test1 中ping test2 也是能够正常ping通的。</p>
<p>如果我们通过 docker run --rm --name test3 -d nginx 这种方式来先启动了一个容器( test3  )并且没有指定它所属的外部网络，而需要将其与 test1 或者 test2 链接的话，这个时候手动链接外部网络即可：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>docker&nbsp;network&nbsp;</span><span class="keyword">connect</span><span>&nbsp;app_net&nbsp;test3&nbsp;</span></span></li></ol></pre>
<p>这样，三个容器都可以相互访问了。</p>
<p><strong>方式二：更改需要链接的容器的网络模式</strong></p>
<p>通过更改你想要相互链接的容器的网络模式为 bridge ,并指定需要链接的外部容器( external_links  )即可。与同属外部网络的容器可以相互访问的链接方式一不同，这种方式的访问是单向的。</p>
<p>还是以nginx容器镜像为例子，如果容器实例 nginx1 需要访问容器实例 nginx2 ，那么 nginx2 的 doker-compose.yml  定义为：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>version:&nbsp;</span><span class="string">"3"</span><span>&nbsp;</span></span></li><li><span>services:&nbsp;</span></li><li class="alt"><span>&nbsp;nginx2:&nbsp;</span></li><li><span>&nbsp;image:&nbsp;nginx&nbsp;</span></li><li class="alt"><span>&nbsp;container_name:&nbsp;nginx2&nbsp;</span></li><li><span>&nbsp;network_mode:&nbsp;bridge&nbsp;</span></li></ol></pre>
<p>与其对应的， nginx1 的 docker-compose.yml 定义为：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>version:&nbsp;</span><span class="string">"3"</span><span>&nbsp;</span></span></li><li><span>services:&nbsp;</span></li><li class="alt"><span>&nbsp;nginx1:&nbsp;</span></li><li><span>&nbsp;image:&nbsp;nginx&nbsp;</span></li><li class="alt"><span>&nbsp;external_links:&nbsp;</span></li><li><span>&nbsp;-&nbsp;nginx2&nbsp;</span></li><li class="alt"><span>&nbsp;container_name:&nbsp;nginx1&nbsp;</span></li><li><span>&nbsp;network_mode:&nbsp;bridge&nbsp;</span></li></ol></pre>
<p>需要特别说明的是，这里的 external_links 是不能省略的，而且 nginx1 的启动必须要在 nginx2 之后，否则可能会报找不到容器  nginx2 的错误。</p>
<p>接着我们使用ping来测试下连通性：</p>
<pre><ol class="dp-sql"><li class="alt"><span><span>$&nbsp;docker&nbsp;</span><span class="keyword">exec</span><span>&nbsp;-it&nbsp;nginx1&nbsp;ping&nbsp;nginx2&nbsp;&nbsp;#&nbsp;nginx1&nbsp;</span><span class="keyword">to</span><span>&nbsp;nginx2&nbsp;</span></span></li><li><span>PING&nbsp;nginx2&nbsp;(172.17.0.4):&nbsp;56&nbsp;data&nbsp;bytes&nbsp;</span></li><li class="alt"><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.17.0.4:&nbsp;icmp_seq=0&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.141&nbsp;ms&nbsp;</span></span></li><li><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.17.0.4:&nbsp;icmp_seq=1&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.139&nbsp;ms&nbsp;</span></span></li><li class="alt"><span>64&nbsp;bytes&nbsp;<span class="keyword">from</span><span>&nbsp;172.17.0.4:&nbsp;icmp_seq=2&nbsp;ttl=64&nbsp;</span><span class="keyword">time</span><span>=0.145&nbsp;ms&nbsp;</span></span></li><li><span>&nbsp;</span></li><li class="alt"><span>$&nbsp;docker&nbsp;<span class="keyword">exec</span><span>&nbsp;-it&nbsp;nginx2&nbsp;ping&nbsp;nginx1&nbsp;#nginx2&nbsp;</span><span class="keyword">to</span><span>&nbsp;nginx1&nbsp;</span></span></li><li><span>ping:&nbsp;unknown&nbsp;host&nbsp;</span></li></ol></pre>
<p>以上也能充分证明这种方式是属于单向联通的。</p>
<p>在实际应用中根据自己的需要灵活的选择这两种链接方式，如果想偷懒的话，大可选择第二种。不过我更推荐第一种，不难看出无论是联通性还是灵活性，较为更改网络模式的第二种都更为友好。</p><p>【编辑推荐】</p><div><ol><li><a href="http://cloud.51cto.com/art/201706/542406.htm" target="_blank">Azure容器中建立Kubernetes群集</a></li><li><a href="http://cloud.51cto.com/art/201706/542414.htm" target="_blank">容器平台加速并简化云应用开发</a></li><li><a href="http://cloud.51cto.com/art/201707/544014.htm" target="_blank">容器如何访问外部世界？- 每天5分钟玩转 Docker 容器技术</a></li><li><a href="http://cloud.51cto.com/art/201707/544751.htm" target="_blank">保持容器基础设施安全的5个最佳办法</a></li><li><a href="http://cloud.51cto.com/art/201707/544765.htm" target="_blank">想要使用容器技术 这5类遗留工具就应该被淘汰</a></li></ol></div><div align="right">【责任编辑：<a class="ln" href="mailto:sunsj@51cto.com">武晓燕</a> TEL：（010）68476606】</div><br>
            <a href="http://cloud.51cto.com/art/201707/544957.htm###" class="dzdz zhan abc" target="_self">点赞 <span>0</span></a>
        </div>
        <div class="share5">
            <ul>
                <li><a href="http://www.51cto.com/php/search.php?keyword=Docker%20Compose" target="_blank" class="underline">Docker Compose</a>&nbsp;&nbsp;<a href="http://www.51cto.com/php/search.php?keyword=%C1%B4%BD%D3" target="_blank" class="underline">链接</a>&nbsp;&nbsp;<a href="http://www.51cto.com/php/search.php?keyword=%C8%DD%C6%F7" target="_blank" class="underline">容器</a></li>
            </ul>
            <dl>
                <dt><em>分享:</em>
<div class="bdsharebuttonbox" data-tag="share_1">
    <a class="wb" data-cmd="tsina"></a>
    <a class="wx" data-cmd="weixin"></a>
    <a class="more" data-cmd="more"></a>
</div>
</dt>
<script type="text/javascript">
    window._bd_share_config = {
        common : {
            bdText : document.title
        },
        share : [{
            "bdSize" : 16,
        }]
    }
    with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>
<!-- Baidu Button END -->
            </dl>
        </div>
        <div class="nrdp comment">
            <div class="comment center">
	<div class="inner center" id="cmscmt_iframe"></div>
</div>
<script type="text/javascript" id="UYScript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/iframe_cmt.js" async=""></script>

        </div>
        <div class="dzk">
            <dl><dt class="show">大家都在看</dt><dt>猜你喜欢</dt></dl>
            <div>
                <ul>
                    <li class="show">
                        <div class="djdzk" id="djdzk">
                        </div>
                    </li>
                    <li>
                       <div class="djdzk" id="cnxh"></div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- 文章左侧结束 -->
    <!-- 文章右侧 -->
    <div class="wrap_right">
        <div><!-- intel广告位 -->

<span class="mtgg" id="right1_ad" style="height:auto; width:300px;margin-bottom: 10px;">

<script type="text/javascript">
var s=window.location.toString();
var s1=s.substr(7,s.length);
var s2=s1.indexOf(".");
s=s.substr(7,s2);
if ( s == 'stor') {
    var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg1.51cto.com/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
    document.write ("?zoneid=987");
    document.write ('&amp;cb=' + m3_r);
    if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
    document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
    document.write ("&amp;loc=" + escape(window.location));
    if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
    if (document.context) document.write ("&context=" + escape(document.context));
    if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
    document.write ("'><\/scr"+"ipt>");

}else if (s == 'server'){
    var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg1.51cto.com/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
    document.write ("?zoneid=986");
    document.write ('&amp;cb=' + m3_r);
    if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
    document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
    document.write ("&amp;loc=" + escape(window.location));
    if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
    if (document.context) document.write ("&context=" + escape(document.context));
    if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
    document.write ("'><\/scr"+"ipt>");

}else if(s == 'network'){
    var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg1.51cto.com/www/delivery/ajs.php');
    var m3_r = Math.floor(Math.random()*99999999999);
    if (!document.MAX_used) document.MAX_used = ',';
    document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
    document.write ("?zoneid=985");
    document.write ('&amp;cb=' + m3_r);
    if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
    document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
    document.write ("&amp;loc=" + escape(window.location));
    if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
    if (document.context) document.write ("&context=" + escape(document.context));
    if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
    document.write ("'><\/scr"+"ipt>");

//    var str = '<div class="m30" style="position:relative;">';
//    str += '<iframe src="http://network.51cto.com/act/cisco/art201709" scrolling="no" frameborder="0" sytle="" width="300" align="middle" height="360" target ="_parent"></iframe>';
//    str +='<div style="left: 0px; width: 24px; height: 14px; z-index: 12; position: absolute; background: transparent url(http://s5.51cto.com/wyfs02/M00/86/BB/wKiom1fI4nWStYqXAAAEoZQn6vs942.png)repeat scroll 0% 0%; bottom: 2px;"></div>';
//    str	+= '</div>';
//    $('#right1_ad').html(str);
}
// var timestamp = Date.parse(new Date());
//timestamp = timestamp / 1000;
    if (s == 'cloud') {
//    var str = "<ins class='dcmads' style='display:inline-block;width:300px;height:360px' data-dcm-placement='N5751.51CTO/B11527656.153459357' data-dcm-rendering-mode='script' data-dcm-http-only data-dcm-app-id=''></ins>";
//
//        $('#right1_ad').html(str);
        //1496592000
        var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg3.51cto.com/www/delivery/ajs.php');
        var m3_r = Math.floor(Math.random()*99999999999);
        if (!document.MAX_used) document.MAX_used = ',';
        document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
        document.write ("?zoneid=969");
        document.write ('&amp;cb=' + m3_r);
        if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
        document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
        document.write ("&amp;loc=" + escape(window.location));
        if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
        if (document.context) document.write ("&context=" + escape(document.context));
        if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
        document.write ("'><\/scr"+"ipt>");
    }
    if (s == 'bigdata') {
        var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg2.51cto.com/www/delivery/ajs.php');
        var m3_r = Math.floor(Math.random()*99999999999);
        if (!document.MAX_used) document.MAX_used = ',';
        document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
        document.write ("?zoneid=970");
        document.write ('&amp;cb=' + m3_r);
        if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
        document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
        document.write ("&amp;loc=" + escape(window.location));
        if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
        if (document.context) document.write ("&context=" + escape(document.context));
        if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
        document.write ("'><\/scr"+"ipt>");
    }
//var timestamp = Date.parse(new Date());
//timestamp = timestamp / 1000;
//    if(s == 'netsecurity'&& (timestamp >= 1506182400)){
//        var str = '<div class="m30" style="position:relative;">';
//    str += '<iframe src="http://netsecurity.51cto.com/act/cisco/art201709" scrolling="no" frameborder="0" sytle="" width="300" align="middle" height="360" target ="_parent"></iframe>';
//    str +='<div style="left: 0px; width: 24px; height: 14px; z-index: 12; position: absolute; background: transparent url(http://s5.51cto.com/wyfs02/M00/86/BB/wKiom1fI4nWStYqXAAAEoZQn6vs942.png)repeat scroll 0% 0%; bottom: 2px;"></div>';
//    str	+= '</div>';
//    $('#right1_ad').html(str);
//    }
</script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(5).php"></script>
    <script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/dcmads.js"></script><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/impl_v42.js"></script>
    </span></div>
        <div class="mtgg m30"><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad(1).js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad(2).php"></script></div>
        <div><!--
<script>
    var s = window.location.href.toString();
    var a = s.split('/');
    var d = a[2];
    var b = a[5].split('.');
    var c = b[0];

    if (d == 'cloud.51cto.com' && c > 600000) {
        var str = "<ins class='dcmads' style='display:inline-block;width:300px;height:360px' data-dcm-placement='N5751.51CTO/B11527656.202054721' data-dcm-rendering-mode='iframe' data-dcm-http-only data-dcm-app-id=''></ins>";
        document.write(str);
    }

    if (d == 'bigdata.51cto.com' && c > 600000) {
        var str = "<ins class='dcmads' style='display:inline-block;width:300px;height:360px' data-dcm-placement='N5751.51CTO/B11527232.153474027' data-dcm-rendering-mode='iframe' data-dcm-http-only data-dcm-app-id=''> </ins>";
        document.write(str);
    }

</script>
<script src='http://www.googletagservices.com/dcm/dcmads.js'></script> -->
</div>
        <div class="bjtj m30">
            <h2><span>编辑推荐</span></h2>
            <dl><dt>关注</dt><dd><a href="http://www.51cto.com/art/201806/576161.htm" title="华为云CeBIT2018现场演示业界领先的跨境合规全球智能云连接服务">华为云CeBIT2018现场演示业界领先的跨境合规全球智能云连接服务</a></dd></dl><dl><dt>热点</dt><dd><a href="http://server.51cto.com/BigData-576067.htm" title="一文看懂2018云计算八大数据！">一文看懂2018云计算八大数据！</a></dd></dl><dl><dt>头条</dt><dd><a href="http://cloud.51cto.com/art/201806/576018.htm" title="如何比较AWS、阿里云和DigitalOcean？">如何比较AWS、阿里云和DigitalOcean？</a></dd></dl><dl><dt>聚焦</dt><dd><a href="http://cloud.51cto.com/art/201806/576011.htm" title="云计算时代如何保护自己的数据">云计算时代如何保护自己的数据</a></dd></dl><dl><dt>关注</dt><dd><a href="http://cloud.51cto.com/art/201806/575976.htm" title="成功进行云计算迁移的八个步骤">成功进行云计算迁移的八个步骤</a></dd></dl>
        </div>
        <div></div>
        <div class="news m30">
            <dl><dt class="show">24H热文</dt><dt>一周话题</dt><dt>本月最赞</dt></dl>
            <ul><li class="show"><a href="http://cloud.51cto.com/art/201410/453718.htm" title="Docker到底是什么？为什么它这么火！">Docker到底是什么？为什么它这么火！</a><a href="http://cloud.51cto.com/art/201803/568537.htm" title="终于有人把云计算、大数据和人工智能讲明白了！">终于有人把云计算、大数据和人工智能讲明白了！</a><a href="http://cloud.51cto.com/art/201701/528506.htm" title="排名前十的文本编辑器，你知道几个？">排名前十的文本编辑器，你知道几个？</a><a href="http://cloud.51cto.com/art/201512/500474.htm" title="微服务与SOA之间差了一个ESB">微服务与SOA之间差了一个ESB</a><a href="http://cloud.51cto.com/art/201412/462905.htm" title="Docker入门教程：15个Docker基本命令及用法">Docker入门教程：15个Docker基本命令及用法</a><a href="http://cloud.51cto.com/art/201802/566103.htm" title="浅谈VPC二三，秒懂秒透">浅谈VPC二三，秒懂秒透</a><a href="http://cloud.51cto.com/art/201803/567896.htm" title="为什么我会被Kubernetes“洗脑”？">为什么我会被Kubernetes“洗脑”？</a><a href="http://cloud.51cto.com/art/201508/487605.htm" title="六款不容错过的开源持续集成工具">六款不容错过的开源持续集成工具</a></li><li><a href="http://cloud.51cto.com/art/201410/453718.htm" title="Docker到底是什么？为什么它这么火！">Docker到底是什么？为什么它这么火！</a><a href="http://cloud.51cto.com/art/201803/568537.htm" title="终于有人把云计算、大数据和人工智能讲明白了！">终于有人把云计算、大数据和人工智能讲明白了！</a><a href="http://cloud.51cto.com/art/201412/462905.htm" title="Docker入门教程：15个Docker基本命令及用法">Docker入门教程：15个Docker基本命令及用法</a><a href="http://cloud.51cto.com/art/201701/528506.htm" title="排名前十的文本编辑器，你知道几个？">排名前十的文本编辑器，你知道几个？</a><a href="http://cloud.51cto.com/art/201512/500474.htm" title="微服务与SOA之间差了一个ESB">微服务与SOA之间差了一个ESB</a><a href="http://cloud.51cto.com/art/201803/567896.htm" title="为什么我会被Kubernetes“洗脑”？">为什么我会被Kubernetes“洗脑”？</a><a href="http://cloud.51cto.com/art/201802/566103.htm" title="浅谈VPC二三，秒懂秒透">浅谈VPC二三，秒懂秒透</a><a href="http://cloud.51cto.com/art/201508/487605.htm" title="六款不容错过的开源持续集成工具">六款不容错过的开源持续集成工具</a></li><li><a href="http://cloud.51cto.com/art/201410/453718.htm" title="Docker到底是什么？为什么它这么火！">Docker到底是什么？为什么它这么火！</a><a href="http://cloud.51cto.com/art/201803/568537.htm" title="终于有人把云计算、大数据和人工智能讲明白了！">终于有人把云计算、大数据和人工智能讲明白了！</a><a href="http://cloud.51cto.com/art/201512/500474.htm" title="微服务与SOA之间差了一个ESB">微服务与SOA之间差了一个ESB</a><a href="http://cloud.51cto.com/art/201412/462905.htm" title="Docker入门教程：15个Docker基本命令及用法">Docker入门教程：15个Docker基本命令及用法</a><a href="http://cloud.51cto.com/art/201803/567896.htm" title="为什么我会被Kubernetes“洗脑”？">为什么我会被Kubernetes“洗脑”？</a><a href="http://cloud.51cto.com/art/201701/528506.htm" title="排名前十的文本编辑器，你知道几个？">排名前十的文本编辑器，你知道几个？</a><a href="http://cloud.51cto.com/art/201508/487605.htm" title="六款不容错过的开源持续集成工具">六款不容错过的开源持续集成工具</a><a href="http://cloud.51cto.com/art/201805/574401.htm" title="从基础到应用，谈谈人工智能这场盛宴">从基础到应用，谈谈人工智能这场盛宴</a></li></ul>
        </div>
        <div><div class="areaAd mt5" id="ad_1">

<script type="text/javascript"><!--//<![CDATA[
var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg3.51cto.com/www/delivery/ajs.php');
var m3_r = Math.floor(Math.random()*99999999999);
if (!document.MAX_used) document.MAX_used = ',';
document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
document.write ("?zoneid=693");
document.write ('&amp;cb=' + m3_r);
if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
document.write ("&amp;loc=" + escape(window.location));
if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
if (document.context) document.write ("&context=" + escape(document.context));
if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
document.write ("'><\/scr"+"ipt>");
//]]>--></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(6).php"></script><noscript>&amp;lt;a href='//gg2.51cto.com/www/delivery/ck.php?n=ae95ac07&amp;amp;amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'&amp;gt;&amp;lt;img src='//gg.51cto.com/www/delivery/avw.php?zoneid=693&amp;amp;amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;amp;amp;n=ae95ac07' border='0' alt='' /&amp;gt;&amp;lt;/a&amp;gt;</noscript>
</div>
<div style="display:none">
<span id="ad1">

<script type="text/javascript"><!--//<![CDATA[
var m3_u = (location.protocol=='https:'?'https://gg.51cto.com/www/delivery/ajs.php':'http://gg3.51cto.com/www/delivery/ajs.php');
var m3_r = Math.floor(Math.random()*99999999999);
if (!document.MAX_used) document.MAX_used = ',';
document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
document.write ("?zoneid=693");
document.write ('&amp;cb=' + m3_r);
if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
document.write (document.charset ? '&amp;charset='+document.charset : (document.characterSet ? '&amp;charset='+document.characterSet : ''));
document.write ("&amp;loc=" + escape(window.location));
if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
if (document.context) document.write ("&context=" + escape(document.context));
if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
document.write ("'><\/scr"+"ipt>");
//]]>--></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(6).php"></script><noscript>&lt;a href='//gg2.51cto.com/www/delivery/ck.php?n=ae95ac07&amp;amp;cb=INSERT_RANDOM_NUMBER_HERE' target='_blank'&gt;&lt;img src='//gg.51cto.com/www/delivery/avw.php?zoneid=693&amp;amp;cb=INSERT_RANDOM_NUMBER_HERE&amp;amp;n=ae95ac07' border='0' alt='' /&gt;&lt;/a&gt;</noscript>
</span>
    </div>
<script>
    document.getElementById('ad_1').innerHTML = document.getElementById('ad1').innerHTML;
</script></div>
        <div class="spkc m30">
            <h2><span>视频课程</span><a href="http://edu.51cto.com/">+更多</a></h2>
            
            <dl>
                <dt><a href="http://edu.51cto.com/course/course_id-4941.html"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/c8f8b4a11ed9c06692e6690c3239b2b4993f2c.jpg" title="OpenStack实战视频课程（进阶+高级）-老段" alt="OpenStack实战视频课程（进阶+高级）-老段" width="100px" height="80px"></a><span></span></dt>
                <dd>
                    <h3><a href="http://edu.51cto.com/course/course_id-4941.html" target="_blank" title="OpenStack实战视频课程（进阶+高级）-老段">OpenStack实战视频课程（进阶+高级）-老段</a></h3>
                    <h4><span class="fl">讲师：<em><a href="http://edu.51cto.com/lecturer/user_id-5428084.html" target="_blank">老段</a></em></span><span class="fr"><em>6631</em>人学习过</span></h4>
                </dd>
            </dl>
            
            <dl>
                <dt><a href="http://edu.51cto.com/course/course_id-8499.html"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/59e2b5c775bc695276d88184ab55226c7773e8.jpg" title="OpenStack 搭建分布式Newton（vxlan模式+最新N版+高清在线）视频课程" alt="OpenStack 搭建分布式Newton（vxlan模式+最新N版+高清在线）视频课程" width="100px" height="80px"></a><span></span></dt>
                <dd>
                    <h3><a href="http://edu.51cto.com/course/course_id-8499.html" target="_blank" title="OpenStack 搭建分布式Newton（vxlan模式+最新N版+高清在线）视频课程">OpenStack 搭建分布式Newton（vxlan模式+最新</a></h3>
                    <h4><span class="fl">讲师：<em><a href="http://edu.51cto.com/lecturer/user_id-2903706.html" target="_blank">宝哥</a></em></span><span class="fr"><em>2935</em>人学习过</span></h4>
                </dd>
            </dl>
            
            <dl>
                <dt><a href="http://edu.51cto.com/course/course_id-4961.html"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/47cac9e4023032a6cc38593bddd62d2861b642.jpg" title="《私有云部署实战-5-Linux OpenStack-juno》视频课程" alt="《私有云部署实战-5-Linux OpenStack-juno》视频课程" width="100px" height="80px"></a><span></span></dt>
                <dd>
                    <h3><a href="http://edu.51cto.com/course/course_id-4961.html" target="_blank" title="《私有云部署实战-5-Linux OpenStack-juno》视频课程">《私有云部署实战-5-Linux OpenStack-juno》</a></h3>
                    <h4><span class="fl">讲师：<em><a href="http://edu.51cto.com/lecturer/user_id-711418.html" target="_blank">刘金丰</a></em></span><span class="fr"><em>951</em>人学习过</span></h4>
                </dd>
            </dl>
            
        </div>
        <div id="zxf0309" class="fl m30">
            <div class="Central_bank  mb20">
                <div class="titall">
                    <a href="http://club.51cto.com/act/cto/caff?51CTOQ" class="zlmore" target="_blank">+ 更多</a>
                    <div class="mintitall">
                        <span class="cur">CTO专属活动</span>
                    </div>
                </div>
                <div class="jp-list">
                    <div class="rmzw_xx">
                        <ul>
                            <li><span class="ico"></span><a href="http://www.huodongxing.com/event/4435421943100" target="_blank">申请试听：花虾金融CEO分享技术战略观 </a></li>
                            <li><span class="ico"></span><a href="http://cn.mikecrm.com/62eHCkG" target="_blank">白熊视频《CTO说》：有奖征集提问</a></li>
                            <li><span class="ico"></span><a href="http://club.51cto.com/act/cto/caff/page/detail/activity_id/21" target="_blank">线下沙龙：架构设计的 N 个原则与案例</a></li>
                        </ul>
                    </div>
                    <dl class="ctoll clearfix">
                    <dt><a href="http://x.51cto.com/?51ctoQ" target="_blank"><span style="color:#BE0000">CTO训练营</span></a></dt>
                    <dd>
                           <a href="http://x.51cto.com/act/cto/camp/page/enroll?51ctoQ" target="_blank">申请入营&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                           <a href="http://x.51cto.com/act/cto/camp/page/course_list?51ctoQ" target="_blank">2018课表&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                           <a href="http://x.51cto.com/act/cto/camp/tutor/1/" target="_blank">CTO导师团</a>
                    </dd>
                  </dl>
                   <dl class="ctoll clearfix">
                    <dt><a href="http://club.51cto.com/?51ctoQ" target="_blank"><span style="color:#BE0000">CTO俱乐部</span></a></dt>
                    <dd>
                         <a href="http://club.51cto.com/act/cto/caff/page/member-notice?51ctoQ" target="_blank">申请加入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>                          
                          <a href="http://club.51cto.com/act/cto/caff/page/activity-list?51ctoQ" target="_blank">最新活动&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
<a href="http://club.51cto.com/act/cto/caff/page/year-list?51ctoQ" target="_blank">全部课程</a>
                                              </dd>
                  </dl>
                   
    </div>
            </div>
        </div>
        <div></div>
        <div></div>
        <div class="zxzt m30">
            <h2><span>最新专题</span><a href="http://cloud.51cto.com/speclist/389">+更多</a></h2>
            <dl>
                <dt><a href="http://cloud.51cto.com/art/201802/566139.htm" title="IT管理者必看 如何打通企业发展的关键痛点？"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/fffedf2b7474056d54da0616e934c3ff.jpg-wh_100x70-s_102733525.jpg" alt="IT管理者必看 如何打通企业发展的关键痛点？" title="IT管理者必看 如何打通企业发展的关键痛点？"></a></dt>
                <dd>
                    <a href="http://cloud.51cto.com/art/201802/566139.htm" title="IT管理者必看 如何打通企业发展的关键痛点？">IT管理者必看 如何打通企业发展的关键痛点？</a>
                    <h3><a href="http://www.51cto.com/php/search.php?keyword=%D4%C6%BC%C6%CB%E3">云计算</a></h3>
                </dd>
            </dl><dl>
                <dt><a href="http://cloud.51cto.com/art/201712/561728.htm" title="2017第十二届中国企业年终评选"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/e4ec8242f39f52dafdb0ea1f84db7b36.jpg-wh_100x70-s_884614062.jpg" alt="2017第十二届中国企业年终评选" title="2017第十二届中国企业年终评选"></a></dt>
                <dd>
                    <a href="http://cloud.51cto.com/art/201712/561728.htm" title="2017第十二届中国企业年终评选">2017第十二届中国企业年终评选</a>
                    <h3><a href="http://www.51cto.com/php/search.php?keyword=%C4%EA%D6%D5%C6%C0%D1%A1">年终评选</a></h3>
                </dd>
            </dl><dl>
                <dt><a href="http://cloud.51cto.com/art/201712/559819.htm" title="你的混合云真的混合了么"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/e6aa6c97512d4f3f5423457d6b8ce325.jpg-wh_100x70-s_2465307948.jpg" alt="你的混合云真的混合了么" title="你的混合云真的混合了么"></a></dt>
                <dd>
                    <a href="http://cloud.51cto.com/art/201712/559819.htm" title="你的混合云真的混合了么">你的混合云真的混合了么</a>
                    <h3><a href="http://www.51cto.com/php/search.php?keyword=%BB%EC%BA%CF%D4%C6">混合云</a></h3>
                </dd>
            </dl><dl>
                <dt><a href="http://cloud.51cto.com/art/201709/552949.htm" title="稳筑新经济基石 加速实现数字化变革"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKioL1nLeqmyz2s8AACDYeL2oyo930.jpg-wh_100x70-s_475477895.jpg" alt="稳筑新经济基石 加速实现数字化变革" title="稳筑新经济基石 加速实现数字化变革"></a></dt>
                <dd>
                    <a href="http://cloud.51cto.com/art/201709/552949.htm" title="稳筑新经济基石 加速实现数字化变革">稳筑新经济基石 加速实现数字化变革</a>
                    <h3><a href="http://www.51cto.com/php/search.php?keyword=%C1%AA%CF%EB">联想</a></h3>
                </dd>
            </dl>
        </div>
        <div></div>
        <div id="jcpl"></div>
        <div></div>
        <div class="news m30">
            <dl><dt class="show">精选博文</dt><dt>论坛热帖</dt><dt>下载排行</dt></dl>
            <div>
                <ul>
                    <li class="show">
                        <a href="http://wsw26.blog.51cto.com/1442148/2084639/" target="_blank" title="keepalived+nginx负载均衡反向代理">keepalived+nginx负载均衡反向代理</a><a href="http://13591594.blog.51cto.com/13581594/2084627/" target="_blank" title="Android  音视频深入 十九 使用ijkplayer做个视频播放器(附源码下载)">Android  音视频深入 十九 使用ijkpl</a><a href="http://fjcloud.blog.51cto.com/212259/2084624/" target="_blank" title="Azure Linux 虚机图像化配置之四:配置问题汇总">Azure Linux 虚机图像化配置之四:配</a><a href="http://wuwenhua.blog.51cto.com/6881915/2084615/" target="_blank" title="从零开始创建自己的区块链应用（JAVA版）">从零开始创建自己的区块链应用（JAVA</a><a href="http://12319914.blog.51cto.com/12309914/2084562/" target="_blank" title="51CTO博客2.0造星计划粉丝大奖赛参赛名单，你关注了吗？">51CTO博客2.0造星计划粉丝大奖赛参赛</a>
                    </li>
                    <li>
                        <a href="http://bbs.51cto.com/thread-1488890-1.html" target="_blank" title="34岁就要被清退，工程师的路在何方？">34岁就要被清退，工程师的路在何方？</a><a href="http://bbs.51cto.com/thread-1489094-1.html" target="_blank" title="茶碗的南下实录（已更新至2018年2月4日写于又一个失眠夜）">茶碗的南下实录（已更新至2018年2月4</a><a href="http://bbs.51cto.com/thread-1489563-1.html" target="_blank" title="吐槽，普通运维的生存倒计时...">吐槽，普通运维的生存倒计时...</a><a href="http://bbs.51cto.com/thread-1490840-1.html" target="_blank" title="一个 Python 下发送邮件的库">一个 Python 下发送邮件的库</a><a href="http://bbs.51cto.com/thread-1492827-1.html" target="_blank" title="京东Java实习生面经">京东Java实习生面经</a>
                    </li>
                    <li>
                        <a href="http://down.51cto.com/data/1976590/" target="_blank" title="曼昆经济学原理笔记">曼昆经济学原理笔记</a><a href="http://down.51cto.com/data/1976589/" target="_blank" title="HTTP协议详解">HTTP协议详解</a><a href="http://down.51cto.com/data/1976588/" target="_blank" title="devcpp">devcpp</a><a href="http://down.51cto.com/data/1976587/" target="_blank" title="function">function</a><a href="http://down.51cto.com/data/1976586/" target="_blank" title="Ganglia监控扩展实现机制（应用实战篇）">Ganglia监控扩展实现机制（应用实战</a>
                    </li>
                </ul>
            </div>
        </div>
        <div></div>
        <div class="ds m30">
            <h2><span>读 书 </span><a href="http://book.51cto.com/">+更多</a></h2>
            <dl>
                
                <dt><a href="http://book.51cto.com/art/200801/63476.htm" title="Visual C# 2005从入门到精通"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/154318523.gif" width="98px" height="144px"></a></dt>
                <dd><h3><a href="http://book.51cto.com/art/200801/63476.htm" title="Visual C# 2005从入门到精通">Visual C# 2005从入门到精通</a></h3>
                    Microsoft Visual C#功能强大、使用简单。本书全面介绍了如何利用Visual Studio2005和NET Framework来进行C#编程。作者将C#的各种特性娓娓...
                </dd>
                
            </dl>
        </div>
        <div></div>
        <div class="dydy">
            <dl>
                <dt><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/dydy.jpg" alt=""></dt>
                <dd>
                    <h3>订阅51CTO邮刊</h3>
                    <h4><a href="http://news.51cto.com/col/1323/">点击这里查看样刊</a></h4>
                    <a href="http://home.51cto.com/index.php?s=/Subscribe"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ljdy.jpg" alt="订阅51CTO邮刊"></a>
                </dd>
            </dl>
        </div>
        <div></div>
    </div>
    <!-- 文章右侧结束 -->
    </div>
<div class="footer_nav">
   <div class="wrap">
       <h2>51CTO旗下网站：</h2>
       <a href="http://www.51cto.com/">领先的IT技术网站 51CTO</a>|<a href="http://www.watchstor.com/">领先的中文存储媒体 WatchStor</a>|
       <a href="http://cio.51cto.com/">中国首个CIO网站 CIOage </a>|<a href="http://www.hc3i.cn/">中国首家数字医疗网站 HC3i</a>
   </div>
</div>
<div id="ft"><div id="foot" align="center"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/copy_right.js"></script>Copyright&#169;2005-2017 <a href="http://www.51cto.com/">51CTO.COM</a> 版权所有 未经许可 请勿转载<script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/8192812cbdc06ec00de3a3244ee59305" type="text/javascript"></script></div></div>
<div class="clk"><a class="ewm" href="http://cloud.51cto.com/art/201707/544957.htm###" target="_self"><img src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wKiom1lfV4XgxZ3zAADAK8-_E6k046.jpg" style="display: none;"></a><a class="yjk" href="http://cloud.51cto.com/art/201707/544957.htm#comment" target="_self"></a><a class="topx" href="http://cloud.51cto.com/art/201707/544957.htm#topx" target="_self"></a></div>
<script>
    $(function(){
        var host = window.location.host;
        document.getElementById('cnxh').style.display = '';
    });
    var $$ = function(func){
        if (document.addEventListener) {
            window.addEventListener("load", func, false);
        }
        else if (document.attachEvent) {
            window.attachEvent("onload", func);
        }
    };

    $$(function(){
        show();
    });
    var show = function(){
        var aa = $('#cmscmt_iframe dl').html();
        setTimeout(function(){
            $("[data-track]").live("click", function() {
                if (aa.indexOf('uid') > -1) {
                    var label = $(this).data("track") + '-login';
                } else {
                    var label = $(this).data("track") + '-not-login';
                }console.log(label);
                window._hmt && window._hmt.push(['_trackEvent', label, 'click']);

            });
        }, 3000);
    }

</script>
<script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/count.js"></script><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/count.php"></script>

<!-- 学院广告位 -->

<!--<div id="edu_adver">-->
    <!--<div class="aderbox">-->
        <!--<span class="educlose">×</span>-->
        <!--<a href="http://edu.51cto.com/activity/6.html?qd=CMSzuoce"><img src="https://s5.51cto.com/oss/201712/05/94601626f864124ca789425588a5a1f5.jpg" width="100" height="300" alt="51CTO学院双十二活动" title="51CTO学院双十二活动"></a>-->
    <!--</div>-->
<!--</div>-->
<style type="text/css">
    #edu_adver{position:fixed; top:240px; left:50%; margin-left:-623px; width:100px; height:300px; border:1px solid #c4c4c6;}
    #edu_adver .aderbox{position:relative;}
    #edu_adver  .educlose{position:absolute; right:6px; top:6px; background:#655c4d; color:#fff; font-size:12px;  display:inline-block; width:13px; height:13px; text-align:center; line-height:13px; cursor:pointer;}
</style>
<script>
    $('#edu_adver .educlose').click(function () {
        $("#edu_adver").hide();
    });
    var s=window.location.toString();
    var s1=s.substr(7,s.length);
    var s2=s1.indexOf(".");
    s=s.substr(7,s2);
    if(s=="stor"||s=="server"||s=="network"||s=="virtual"){
        $("#edu_adver").hide();
    }
    if (s=="stor"||s=="server"||s=="network"||s=="virtual") {
        $('.aderbox').find('a')[0].href = '';
        $('.aderbox').find('img')[0].src = 'https://s2.51cto.com/oss/201711/01/507eecf589ca025c76a3aff2dfc1fcc4.jpg';
    }
</script>
<script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/iframe-member-adv"></script>
<script type="text/javascript">var artid = 544957</script>
<script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/index(2).php" charset="utf-8"></script><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/vip_top.js"></script>
<script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article.js"></script>
<script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/article_ajax.js"></script>
<script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/count(1).php" type="text/javascript"></script>
<script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/favorbox.js"></script>
<!--  一大波JS来袭 -->
<div id="MyMoveAd" style="display:none">
    <span id="pinglun"><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/getArtCount.php"></script>0</span>
	<span id="tonglan"><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad.php"></script></span>
	<span id="wordlink_1"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink1.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs.php"></script></span>
	<span id="wordlink_2"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink2.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(1).php"></script></span>
	<span id="wordlink_3"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink3.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(2).php"></script></span>
	<span id="wordlink_4"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/wordlink4.js"></script><script type="text/javascript" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ajs(3).php"></script></span>
	<span id="wordlink"><script src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/ad(3).js"></script></span>
</div>
<script type="text/javascript">
var thistid=544957;
//收藏按钮
var favor_url = 'http://cloud.51cto.com/art/201707/544957.htm';
var favor_title = 'Docker Compose：链接外部容器的几种方式';  
document.getElementById('tonglanad').innerHTML=document.getElementById('tonglan').innerHTML;
</script>
<!-- 结束 -->


<div class="sogoutip" style="z-index: 2147483645; visibility: hidden;"></div><div class="sogoubottom" id="sougou_bottom" style="display: none;"></div><div id="ext_stophi" style="z-index: 2147483647;"><div class="extnoticebg"></div><div class="extnotice"><h2>关闭提示 <a href="http://cloud.51cto.com/art/201707/544957.htm#" title="关闭提示" id="closenotice" class="closenotice">关闭</a></h2><p id="sogouconfirmtxt"></p>  <a id="sogouconfirm" href="http://cloud.51cto.com/art/201707/544957.htm#" class="extconfirm">确 认</a> <a id="sogoucancel" href="http://cloud.51cto.com/art/201707/544957.htm#" class="extconfirm">取 消</a></div></div><div id="ext_overlay" class="ext_overlayBG" style="display: none; z-index: 2147483646;"></div><iframe class="sogou_sugg_feedbackquan" frameborder="0" scrolling="no" src="./Docker Compose：链接外部容器的几种方式 - 51CTO.COM_files/yun6.html" style="border: none; display: none; height: 84px; width: 100%; z-index: 2147483645; background: transparent;"></iframe></body></html>